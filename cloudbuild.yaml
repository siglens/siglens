steps:

  - name: golang:1.19
    entrypoint: /bin/bash
    args:
      - -c
      - |
        make build
  - name: golang:1.19
    entrypoint: /bin/bash
    args:
      - -c
      - |
        ./siglens --config server.yaml &
        sleep 30
        curl http://127.0.0.1:8081
        cd tools/sigclient
        go run main.go functional -d http://localhost:8081/elastic -f functionalQueries/functionalQueries.yml -q localhost:5122


timeout: 3600s

options:
 defaultLogsBucketBehavior: REGIONAL_USER_OWNED_BUCKET
